(this.webpackJsonpbandits=this.webpackJsonpbandits||[]).push([[0],{125:function(e,n,t){},132:function(e,n,t){},134:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(1),i=t.n(a),c=t(16),l=t.n(c),o=(t(125),t(4)),s=(t(132),t(23)),u=t(24),d=t(9),b=t(2),h=function(e){var n=e.id,t=e.mu,r=void 0===t?Math.round(5*(Math.random()-.5)*10)/10:t,a=e.hidden;return{id:n,mu:r,hidden:void 0===a||a,number:null,numbers:[],playing:!1,average:0}},j=Object(b.d)(0,1),m=function(e){var n=j()+e.mu,t=e.numbers.length+1;return Object(s.a)(Object(s.a)({},e),{},{number:n,numbers:[].concat(Object(u.a)(e.numbers),[n]),average:e.average+(n-e.average)/t})},f=function(e,n){var t=h({id:n});return t.hidden=e.hidden,t.mu=e.mu,t},g=Object(d.b)({name:"bandit",initialState:function(e){for(var n={N:e,bandits:Object(u.a)(Array(10)).map((function(e,n){return h({id:n})})),activeAlgorithm:0,epsilon:.98,lastPlayed:void 0,algorithmStepping:!1},t=0;t<e;t++)n.bandits[t].hidden=!1,n.bandits[t].numbers=[];return n}(5),reducers:{changeN:function(e,n){for(var t=+n.payload,r=0;r<10;r++)e.bandits[r].hidden=r>=t;e.N=t},setOneMu:function(e,n){var t=n.payload,r=t.id,a=t.mu;e.bandits[r].mu=+a},pullOne:function(e,n){var t=n.payload;e.bandits[t]=m(e.bandits[t])},pullAll:function(e){e.bandits=e.bandits.map(m)},resetOne:function(e,n){var t=n.payload;e.bandits[t]=f(e.bandits[t],t)},resetAll:function(e){e.bandits.forEach((function(n,t){e.bandits[t]=f(n,t)}))},setOnePlaying:function(e,n){console.log("Here!");var t=n.payload;e.bandits[t].playing=!e.bandits[t].playing},setAllPlaying:function(e){for(var n=0;n<e.N;n++)e.bandits[n].playing=!e.bandits[n].playing},setStepping:function(e){e.algorithmStepping=!e.algorithmStepping},setEpsilon:function(e,n){e.epsilon=n.payload}}}),v=g.actions,p=v.changeN,x=v.setOneMu,O=v.pullOne,y=(v.pullAll,v.resetOne),w=v.resetAll,k=v.setOnePlaying,N=v.setAllPlaying,S=v.setStepping,P=v.setEpsilon,A=function(e){return e.bandit.bandits.filter((function(e){return!e.hidden}))},C=function(e){return e.bandit.algorithmStepping},M=function(e){return e.bandit.epsilon},E=function(e){return e.bandit.N},R=g.reducer;var B=function(e){var n=e.number,t=+n>0?"green":"red";return Object(r.jsx)("div",{className:"mb-3 text-".concat(t,"-700 text-lg"),children:Math.round(1e3*n)/1e3})};var V=function(e){var n=e.data,t=e.width,a=void 0===t?160:t,i=e.height,c=void 0===i?30:i,l=n.length,o=0===l?0:(a-l)/l,s=Object(b.e)().domain([0,l]).range([0,a]),u=Object(b.e)().domain([-5,5]).range([c,0]);return Object(r.jsx)("div",{className:"sparkline",children:Object(r.jsx)("svg",{width:a,height:c,children:Object(r.jsx)("g",{children:n.map((function(e,n){return Object(r.jsx)("rect",{className:"bar",x:s(n),height:u(e),y:c-u(e),width:o,fill:e>0?"green":"red"},n)}))})})})};var I=function(e){var n=e.data,t=e.width,i=e.height,c=Object(a.useRef)(null),l=Object(b.b)().thresholds(30)(n),o=Object(b.e)().domain([l[0].x0,l[l.length-1].x1]).range([0,t]),s=Object(b.e)().domain([0,Object(b.c)(l,(function(e){return e.length}))]).nice().range([i,0]);return c.current&&n.length>0&&Object(b.f)(c.current).attr("transform","translate(0,".concat(i,")")).call(Object(b.a)(o).ticks(6)),0===n.length?Object(r.jsx)("svg",{width:t,height:i+20}):Object(r.jsx)("div",{children:Object(r.jsxs)("svg",{width:t,height:i+20,children:[Object(r.jsx)("g",{children:l.map((function(e,n){return Object(r.jsx)("rect",{className:"bar",x:o(e.x0)+1,width:Math.max(0,o(e.x1)-o(e.x0)-1),y:s(e.length),height:s(0)-s(e.length),fill:"#374151"},n)}))}),Object(r.jsx)("g",{ref:c})]})})};var J=function(e,n){var t=Object(a.useRef)();Object(a.useEffect)((function(){t.current=e}),[e]),Object(a.useEffect)((function(){if(null!==n){var e=setInterval((function(){t.current()}),n);return function(){return clearInterval(e)}}}),[n])};var W=function(e){var n=e.onClick,t=e.children,a=e.color,i="bg-transparent font-semibold hover:text-white py-2 px-4 border  hover:border-transparent rounded w-2/5 m-1 max-w-xs";switch(void 0===a?"blue":a){case"blue":i+=" border-blue-500 hover:bg-blue-500 text-blue-700";break;case"red":i+=" border-red-500 hover:bg-red-500 text-red-700";break;case"green":i+=" border-green-500 hover:bg-green-500 text-green-700";break;case"yellow":i+=" border-yellow-500 hover:bg-yellow-500 text-yellow-700";break;case"pink":i+=" border-pink-500 hover:bg-pink-500 text-pink-700"}return Object(r.jsx)("button",{className:i,onClick:n,children:t})};var D=function(e){var n=e.width,t=e.number,a=e.mu,i=e.numbers,c=e.playing,l=e.average,o=e.onReset,s=e.onPlay,u=e.onPull,d=e.onSetMu,b=i.length;return J(u,c?.1:null),Object(r.jsxs)("div",{className:"flex flex-col items-center border-2 border-dashed border-red-200 m-1",style:{width:200},children:[Object(r.jsxs)("div",{className:"flex items-center justify-around",children:[Object(r.jsxs)("div",{className:"flex w-1/2 justify-around",children:[Object(r.jsx)("span",{className:"w-1/3 text-purple-700 font-medium",children:"mu"}),Object(r.jsx)("input",{type:"number",className:"w-2/3 border border-purple-500 p-0.5",name:"mu",id:"mu",defaultValue:a,step:.1,min:-4,max:4,onChange:function(e){return d(e.target.value)}})]}),Object(r.jsx)(B,{number:t})]}),Object(r.jsx)(W,{onClick:u,children:"Pull"}),Object(r.jsx)(W,{onClick:s,color:"green",children:c?"Pause":"Play"}),Object(r.jsx)(W,{onClick:o,color:"red",children:"Reset"}),Object(r.jsx)(V,{width:n,data:i.slice(-10)}),Object(r.jsx)(I,{data:i,width:n,height:150}),Object(r.jsxs)("p",{children:[b," Draws"]}),Object(r.jsxs)("p",{children:["Average of ",Math.round(1e3*l)/1e3," "]})]})};var F=function(e){var n=e.epsilon,t=e.values,a=e.onAct,i=e.stepping,c=e.onSetStepping,l=function(){a(Math.random()>n?Math.floor(Math.random()*(t.length+1)):function(e){for(var n=-1,t=-1/0,r=0;r<e.length;r++){var a=e[r];a>t&&(n=r,t=a)}return n}(t))};return J(l,i?.1:null),Object(r.jsxs)("div",{children:[Object(r.jsx)(W,{onClick:c,color:"green",children:i?"Pause":"Run"}),Object(r.jsx)(W,{onClick:l,color:"blue",children:"Step"})]})};var G=function(e){var n=e.value,t=e.name,a=e.onChange,i=e.min,c=e.max,l=e.step,o=e.defaultValue;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{className:"pr-4",children:[t," = ",n]}),Object(r.jsx)("label",{htmlFor:"value",children:Object(r.jsx)("input",{type:"range",name:"value",id:"value",min:i,max:c,step:l,defaultValue:o,onChange:function(e){return a(e.target.value)}})})]})};var H=function(e){var n=e.epsilon,t=e.onSetEpsilon;return Object(r.jsx)(G,{value:n,name:"epsilon",onChange:t,min:0,max:1,step:.01,defaultValue:.9})};var L=function(e){var n=e.classes,t=void 0===n?"":n,a=e.children,i="text-xl font-semibold ".concat(t," mt-8 mb-8");return Object(r.jsx)("h1",{className:i,children:a})};var $=function(){var e=Object(o.c)(A),n=e.map((function(e){return e.average})),t=Object(o.c)(C),a=Object(o.c)(M),i=Object(o.b)(),c=e.map((function(e,n){return Object(r.jsx)(D,{width:160,mu:e.mu,number:e.number,numbers:e.numbers,playing:e.playing,average:e.average,onReset:function(){return i(y(n))},onPlay:function(){return i(k(n))},onPull:function(){return i(O(n))},onSetMu:function(e){return i(x({id:n,mu:e}))}},n)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"flex flex-wrap",children:c}),Object(r.jsx)(L,{children:"Epsilon Greedy Algorithm"}),Object(r.jsx)(H,{epsilon:a,onSetEpsilon:function(e){return i(P(e))}}),Object(r.jsx)(F,{values:n,onAct:function(e){i(O(e))},stepping:t,epsilon:a,onSetStepping:function(){return i(S())}})]})};var q=function(){var e=Object(o.b)(),n=Object(o.c)(E);return Object(r.jsxs)("div",{className:"container mx-auto px-8",children:[Object(r.jsx)(L,{children:"Learning with Bandits!"}),Object(r.jsx)(G,{value:n,name:"Number of Bandits",onChange:function(n){return e(p(n))},min:2,max:10,step:1,defaultValue:5}),Object(r.jsx)(W,{onClick:function(){return e(N())},color:"yellow",children:"Play/Pause all"}),Object(r.jsx)(W,{onClick:function(){return e(w())},color:"pink",children:"Reset all"}),Object(r.jsx)($,{})]})},z=Object(d.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,n){e.value+=n.payload}}}),K=z.actions,Q=(K.increment,K.decrement,K.incrementByAmount,z.reducer),T=Object(d.a)({reducer:{counter:Q,bandit:R}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(o.a,{store:T,children:Object(r.jsx)(q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[134,1,2]]]);
//# sourceMappingURL=main.c5da032b.chunk.js.map